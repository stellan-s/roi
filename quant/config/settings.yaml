run:
  as_of: today         # eller YYYY-MM-DD
  outdir: "reports"

data:
  cache_dir: "data"
  lookback_days: 500   # Historisk data fÃ¶r regime detection

signals:
  sma_long: 200        # SMA fÃ¶r trend signal
  momentum_window: 252 # Ã…rsmomemtum (252 trading days)
  news_feed_urls:
    - "https://news.cision.com/se/rss/all"

# Bayesian Engine Configuration
bayesian:
  time_horizon_days: 21          # Investeringshorisont fÃ¶r E[r] och Pr(â†‘)
  decision_thresholds:
    buy_probability: 0.58        # KÃ¶p nÃ¤r Pr(â†‘) â‰¥ 58% (mer aggressiv)
    sell_probability: 0.40       # SÃ¤lj nÃ¤r Pr(â†‘) â‰¤ 40% (mer aggressiv)
    min_expected_return: 0.0005  # Minimum 0.05% daglig E[r] fÃ¶r kÃ¶p (lÃ¤gre)
    max_uncertainty: 0.35        # Max osÃ¤kerhet fÃ¶r action (tolerera mer)

  # Prior beliefs fÃ¶r signaler (kan justeras baserat pÃ¥ backtest)
  priors:
    trend_effectiveness: 0.62    # SMA trend-following edge (hÃ¶gre)
    momentum_effectiveness: 0.68 # Momentum Ã¤r starkast dokumenterat (hÃ¶gre)
    sentiment_effectiveness: 0.58 # Sentiment Ã¤r noisier (hÃ¶gre)

# Regime Detection Configuration
regime_detection:
  enabled: true
  lookback_days: 60             # Regime detection window
  volatility_window: 20         # Volatilitet berÃ¤kning
  trend_window: 50             # Trend styrka window

  # Regime transition probabilities (sticky regimes)
  transition_persistence: 0.80  # Sannolikhet att stanna i samma regim

  # Regime classification thresholds
  thresholds:
    volatility_low: 0.15        # 15% Ã¥rlig vol = lÃ¥g
    volatility_high: 0.25       # 25% Ã¥rlig vol = hÃ¶g
    return_bull: 0.002          # 0.2% daglig fÃ¶r bull
    return_bear: -0.002         # -0.2% daglig fÃ¶r bear
    drawdown_bear: -0.10        # -10% drawdown â†’ bear

policy:
  max_weight: 0.10             # Max position size per aktie
  pre_earnings_freeze_days: 5  # Disciplinmotor: ingen handel fÃ¶re earnings
  trade_cost_bps: 5           # Transaction costs (lÃ¤gre fÃ¶r mer trades)

  # Portfolio-nivÃ¥ regler
  max_single_regime_exposure: 0.85  # Max 85% i samma regim (mer tillÃ¥tande)
  regime_diversification: true      # KrÃ¤v regim-diversifiering
  min_portfolio_positions: 3        # Minst 3 aktiva positioner
  bear_market_allocation: 0.60      # Max 60% allokering i bear market

  # Heavy-tail risk controls
  max_tail_risk_allocation: 0.30    # Max 30% i hÃ¶grisk-positioner (tail_risk > 0.7)
  tail_risk_position_penalty: 0.30  # Max 30% reduction fÃ¶r high tail risk
  min_tail_risk_adjusted_weight: 0.5 # Minimum 50% av ursprunglig vikt efter tail penalty

# Heavy-tail Risk Modeling Configuration
risk_modeling:
  enabled: true
  confidence_levels: [0.95, 0.99, 0.999]  # VaR confidence levels
  time_horizons_days: [21, 63, 252]       # 1m, 3m, 1y analysis
  monte_carlo_simulations: 10000          # MC simulation size
  evt_threshold_percentile: 0.95          # EVT tail threshold
  min_observations_for_tail_fit: 30       # Minimum data points fÃ¶r Student-t fitting

  # Tail risk score thresholds fÃ¶r visualization
  tail_risk_thresholds:
    low: 0.4        # Green ðŸŸ¢ below this
    high: 0.7       # Red ðŸ”´ above this, Yellow ðŸŸ¡ between

# Risk Analytics Configuration
risk_analytics:
  stress_scenarios: ["black_monday", "covid_crash", "regime_shift"]
  risk_free_rate: 0.02                    # 2% annual risk-free rate
  target_portfolio_volatility: 0.15       # 15% target vol
  tail_risk_penalty: 0.02                 # Extra penalty fÃ¶r heavy tails
