# ROI Trading System - Clean Configuration
# Endast inställningar som faktiskt används i koden

# Basic execution settings
run:
  as_of: today
  outdir: "reports"

# Data settings
data:
  cache_dir: "data"
  lookback_days: 1250

# Backtesting settings
backtesting:
  default_period_days: 180

# Basic signal settings (används i technical.py)
signals:
  sma_long: 50
  momentum_window: 252

  # News feeds (används aktivt)
  news_feed_urls:
    - "https://news.cision.com/se/rss/all"
    - "https://www.di.se/rss/"
    - "https://finance.yahoo.com/news/rssindex"
    - "https://www.cnbc.com/id/100003114/device/rss/rss.html"

# Regime detection settings (används aktivt)
regime_detection:
  lookback_days: 60
  volatility_window: 20
  trend_window: 50

  # Regime persistence and uncertainty
  transition_persistence: 0.85
  transition_uncertainty_threshold: 0.2

  # Classification thresholds
  thresholds:
    volatility_low: 0.12
    volatility_high: 0.30
    return_bull: 0.003
    return_bear: -0.003
    drawdown_bear: -0.15

  # VIX integration (används aktivt)
  vix_integration:
    enabled: true
    influence_weight: 0.8
    override_threshold: 25.0
    override_strength: 1.0

    # VIX regime multipliers
    regime_multipliers:
      low_fear:        # VIX < 20
        bull_boost: 0.6
        bear_penalty: -0.3
        neutral_boost: 0.1
      moderate_fear:   # VIX 20-30
        bull_boost: 0.1
        bear_penalty: 0.0
        neutral_boost: 0.4
      high_fear:       # VIX 30-40
        bull_boost: -0.2
        bear_penalty: 0.0
        neutral_boost: 0.2
      extreme_fear:    # VIX > 40
        bull_boost: -0.4
        bear_penalty: 0.0
        neutral_boost: 0.1

# Policy settings (endast det som används)
policy:
  max_weight: 0.06
  trade_cost_bps: 3

  # Adaptive thresholds (nytt - används aktivt)
  adaptive_thresholds:
    enabled: true
    base_min_return: 0.0005      # 0.05% - mycket låg
    base_min_confidence: 0.40    # 40% - låg

    # Volatility-based adjustments
    volatility_adjustments:
      low_vol_threshold: 0.12
      high_vol_threshold: 0.25
      low_vol_return_multiplier: 0.5     # Mer aggressiv i låg vol
      low_vol_confidence_multiplier: 0.8
      high_vol_return_multiplier: 1.5    # Mer selektiv i hög vol
      high_vol_confidence_multiplier: 1.2

  # Position scaling (nytt - används aktivt)
  position_scaling:
    enabled: true
    initial_position_size: 0.02   # Start med 2%
    max_scale_size: 0.06         # Max 6%
    scaling_trigger_return: 0.03  # Skala vid 3% vinst
    scaling_increment: 0.01       # Öka 1% åt gången
    max_scaling_levels: 4

  # Transaction optimization (förenklad)
  transaction_optimization:
    enabled: true
    min_expected_alpha: 0.001
    cost_benefit_ratio: 1.5


# Bayesian engine settings (grundläggande)
bayesian:
  base_annual_return: 0.08
  uncertainty_threshold: 0.5

# Stock-Specific Factor Profile System (återställt)
stock_factor_profiles:
  enabled: true

  # Dynamic filtering for investable universe
  dynamic_filtering:
    cost_threshold: 0.002        # 20bp min expected return (High selectivity)
    conviction_threshold: 0.55   # 55% min decision confidence (Above average)
    max_positions: 5             # Focus portfolio on ONLY the best opportunities
    min_liquidity_mcap: 1000     # Minimum market cap (MSEK) for liquidity
    # Alpha-focused filtering
    alpha_requirements:
      min_expected_alpha: 0.03   # Minimum 3% expected alpha per position
      min_sharpe_contribution: 0.02  # Minimum 0.02 Sharpe contribution per position
      require_multiple_signals: true  # Require confirmation from multiple signal types

  # Factor profile categories
  categories:
    swedish_banks:
      description: "Swedish financial institutions - rate sensitive"
      stocks: ["SEB-A.ST", "SWED-A.ST", "SHB-A.ST", "NDA-SE.ST"]
      factor_weights:
        momentum: 0.4            # Banks less momentum-driven
        sentiment: 0.6           # Moderate news sensitivity
        interest_rate_sensitivity: 0.9  # Critical factor for banks
        credit_cycle: 0.8        # Loan demand and credit risk
      # Macro sensitivities for easy implementation
      macro_sensitivities:
        treasury_10y: 0.8        # Higher rates = higher bank margins
        dollar_index: 0.3        # Moderate USD strength impact
        oil: -0.2                # Higher oil = slight negative (costs)
        eur_sek: 0.4             # EUR strength helps Swedish banks
      regime_multipliers:
        bull: 1.2               # Benefit from economic growth
        bear: 0.7               # Defensive characteristics
        neutral: 1.0

    swedish_industrials:
      description: "Swedish industrial/cyclical companies"
      stocks: ["VOLV-B.ST", "ATCO-A.ST", "ATCO-B.ST", "SAND.ST", "SKF-B.ST", "ABB.ST", "ALFA.ST", "EPI-A.ST", "SAAB-B.ST"]
      factor_weights:
        momentum: 0.6           # Moderate momentum sensitivity
        sentiment: 0.5          # Less news-driven, more fundamental
        economic_cycle: 0.9     # Highly sensitive to GDP/PMI
        commodity_exposure: 0.7 # Input cost sensitivity
      # Macro sensitivities for cyclical industrials
      macro_sensitivities:
        treasury_10y: -0.4       # Higher rates hurt cyclicals
        dollar_index: 0.2        # USD strength helps exporters
        oil: -0.6                # High oil = major input cost
        eur_sek: 0.6             # EUR strength helps Swedish exporters
      regime_multipliers:
        bull: 1.3               # High leverage to growth
        bear: 0.6               # Cyclical downturns hurt
        neutral: 0.9

    swedish_consumer:
      description: "Swedish consumer discretionary/retail"
      stocks: ["HM-B.ST", "DUNI.ST", "CLAS-B.ST", "ELUX-B.ST"]
      factor_weights:
        momentum: 0.5           # Consumer trends can persist
        sentiment: 0.9          # Very news/sentiment sensitive
        consumer_confidence: 0.8 # Discretionary spending driver
        sek_strength: 0.6       # Import/export sensitivity
      regime_multipliers:
        bull: 1.1               # Moderate growth leverage
        bear: 0.8               # Defensive in downturns
        neutral: 1.0

    swedish_tech:
      description: "Swedish technology and telecom"
      stocks: ["ERIC-B.ST", "TEL2-B.ST", "HEXA-B.ST", "EVO.ST", "ENEA.ST", "CEVI.ST"]
      factor_weights:
        momentum: 0.8           # Tech can be momentum-driven
        sentiment: 0.8          # Innovation/disruption news sensitive
        growth_expectations: 0.9 # Valuation based on growth
        tech_sector_rotation: 0.7 # Sector-specific flows
      regime_multipliers:
        bull: 1.4               # High growth premium in bull markets
        bear: 0.5               # Heavy sell-off in bear markets
        neutral: 0.8

    us_tech_giants:
      description: "Large cap US technology leaders - PRIMARY ALPHA SOURCE"
      stocks: ["GOOGL", "MSFT", "NVDA", "AAPL", "META", "AMZN"]
      factor_weights:
        momentum: 1.5           # MASSIVE momentum focus
        sentiment: 1.2          # AI/innovation news critical
        fed_policy: 0.8         # Rate sensitive (growth valuations)
        ai_innovation: 1.5      # AI theme driving valuations
      # Alpha-focused weighting
      alpha_multipliers:
        enabled: true
        base_weight: 2.0        # 2x weighting vs other categories
        momentum_bonus: 3.0     # 3x bonus for strong momentum
        breakout_bonus: 2.5     # 2.5x bonus for breakouts
      # Macro sensitivities for growth/tech stocks
      macro_sensitivities:
        treasury_10y: -0.9       # Very rate sensitive (high duration)
        dollar_index: -0.3       # USD strength hurts international revenue
        oil: -0.1                # Minor input cost impact
        eur_sek: 0.0             # No direct EUR/SEK exposure
      regime_multipliers:
        bull: 2.0               # MASSIVE leverage to risk-on sentiment
        bear: 0.2               # Heavy de-risking target
        neutral: 0.5            # Reduced neutral exposure

    energy_commodities:
      description: "Energy and commodity-driven names"
      stocks: ["BOL.ST", "EQT.ST", "TSLA"]  # Mining, oil/gas, EV transition
      factor_weights:
        momentum: 0.7           # Commodity trends persist
        sentiment: 0.6          # Moderate news sensitivity
        commodity_prices: 0.95  # Direct commodity exposure
        energy_transition: 0.8  # ESG/transition themes
      regime_multipliers:
        bull: 1.2               # Risk-on commodity demand
        bear: 0.8               # Defensive commodity demand
        neutral: 1.1

    defensive_quality:
      description: "Defensive high-quality companies"
      stocks: ["AZN.ST", "ESSITY-B.ST", "NIBE-B.ST", "ASSA-B.ST", "LIFCO-B.ST", "INVE-B.ST"]
      factor_weights:
        momentum: 0.3           # Less momentum-sensitive
        sentiment: 0.4          # Less news-driven
        quality_metrics: 0.9    # ROE, debt levels, margins
        dividend_yield: 0.7     # Income characteristics
      regime_multipliers:
        bull: 0.8               # Underperform in risk-on
        bear: 1.2               # Outperform in risk-off
        neutral: 1.1

# Risk management (grundläggande)
risk:
  max_position_risk: 0.06
  portfolio_var_limit: 0.15